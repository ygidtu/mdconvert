/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'org.jetbrains.kotlin.jvm' version '1.3.30'
}

group 'org.chenlinlab.mdtopdf.converter'
version '1.0'

sourceCompatibility = 1.8

repositories {
    maven { url "http://maven.aliyun.com/nexus/content/groups/public" }
    mavenCentral()
}

dependencies {
    // https://mvnrepository.com/artifact/com.github.ajalt/clikt

}

dependencies {
    compile 'com.openhtmltopdf:openhtmltopdf-core:0.0.1-RC20'
    compile 'com.openhtmltopdf:openhtmltopdf-pdfbox:0.0.1-RC20'
    compile 'com.openhtmltopdf:openhtmltopdf-java2d:0.0.1-RC20'
    compile 'com.openhtmltopdf:openhtmltopdf-rtl-support:0.0.1-RC20'
    compile 'com.openhtmltopdf:openhtmltopdf-slf4j:0.0.1-RC20'
    compile 'com.openhtmltopdf:openhtmltopdf-log4j:0.0.1-RC20'
    compile 'com.openhtmltopdf:openhtmltopdf-svg-support:0.0.1-RC20'
    compile 'com.openhtmltopdf:openhtmltopdf-mathml-support:0.0.1-RC20'

    compile 'com.atlassian.commonmark:commonmark:0.12.1'
    compile group: 'com.atlassian.commonmark', name: 'commonmark-ext-gfm-tables', version: '0.12.1'
    compile group: 'com.atlassian.commonmark', name: 'commonmark-ext-autolink', version: '0.12.1'
    compile group: 'com.atlassian.commonmark', name: 'commonmark-ext-ins', version: '0.12.1'
    compile group: 'com.atlassian.commonmark', name: 'commonmark-ext-gfm-strikethrough', version: '0.12.1'
    compile group: 'com.atlassian.commonmark', name: 'commonmark-ext-yaml-front-matter', version: '0.12.1'
    compile group: 'com.atlassian.commonmark', name: 'commonmark-ext-heading-anchor', version: '0.12.1'

    compile group: 'org.thymeleaf', name: 'thymeleaf', version: '3.0.11.RELEASE'
    compile group: 'org.slf4j', name: 'slf4j-simple', version: '1.7.26'

    compile group: 'com.github.ajalt', name: 'clikt', version: '1.7.0'

    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

sourceSets {
    main.kotlin.srcDirs += "src/main/kotlin"
    test.kotlin.srcDirs += "src/test/kotlin"
}


compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

//create a single Jar with all dependencies
jar {
    manifest {
        attributes 'Main-Class': "org.chenlinlab.converter.MainKt"
    }

    from("resources") {
        include "log4j.properties"
    }

    from {
        //添加依懒到打包文件
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}